#summary Document how LanguageCommons Uploader was deployed on the current OLAC server.

= Introduction =

This wiki page documents how the LanguageCommons Uploader, written by Alistair Roche <roche.a@gmail.com>, was deployed on the current OLAC web server as of March 2001. Additional information non-existent in the software documentation is included. That will help reduce learning curve for future deployment on a different server.


= Prerequisites =

Install Django 1.2.5.
Install Django uni_form.
Install Django south.

(Apache, MySQL and mod_wsgi were already available on the OLAC server.)


= Install LanguageCommons Uploader at non-root URL =

Download LanguageCommons Uploader from `[URL TBD]`. This version patches the original version to allow the application to be deployed at a non-root URL. The original version by Roche can be downloaded from [https://github.com/atroche/language-commons here].

Create a directory PREFIX/django/languagecommons (replace PREFIX with the path of your choice). Copy the downloaded files and directories to the created directory. At the top level of the directory, you should see files like README.markdown, settings.py and urls.py.

Create a directory PREFIX/django/languagecommons/apache. Inside that directory, create a file called django.wsgi.

{{{
import os
import sys
import olac

os.environ['PYTHON_EGG_CACHE'] = olac.olacvar('python/egg_cache/wsgi')
os.environ['DJANGO_SETTINGS_MODULE'] = 'languagecommons.settings'

sys.path.append('PREFIX/django')  # replace PREFIX with your path
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler()
}}}

Edit PREFIX/django/languagecommons/settings.py to set the PREFIX variable.

= Configure MySQL =

= Configure Apache =

= Cron job =
Add a cron job checks newly accepted items and uploads them to archive.org. For example,

{{{
*/15 * * * * (cd PREFIX/django/languagecommons; ./manage.py upload_items)
}}}